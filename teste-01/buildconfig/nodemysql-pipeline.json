{"kind":"BuildConfig","apiVersion":"build.openshift.io/v1","metadata":{"name":"nodemysql-pipeline","namespace":"teste-01","selfLink":"/apis/build.openshift.io/v1/namespaces/teste-01/buildconfigs/nodemysql-pipeline","uid":"93d2f8b0-a741-11e9-a846-42010a9e0002","resourceVersion":"22947","creationTimestamp":"2019-07-15T20:46:10Z","labels":{"app":"nodejs-8-template","app_name":"nodemysql","template":"nodejs-8-template"},"annotations":{"description":"Defines pipeline the application"}},"spec":{"triggers":[{"type":"GitHub","github":{"secret":"DdsBIvCQdOMOCic7NDAlAeL0rOil4KQs2oBcCBla"}},{"type":"Generic","generic":{"secret":"LCe7nDuyNrqRPhLiEObVTfwBXMqQhRscbbloG7Fa"}}],"runPolicy":"Serial","source":{"type":"None"},"strategy":{"type":"JenkinsPipeline","jenkinsPipelineStrategy":{"jenkinsfile":"try {\n   timeout(time: 20, unit: 'MINUTES') {\n      node('nodejs') {\n          stage('build') {\n            openshift.withCluster() {\n               openshift.withProject() {\n                  def bld = openshift.startBuild('nodemysql')\n                  bld.untilEach {\n                    return it.object().status.phase == \"Running\"\n                  }\n                  bld.logs('-f')\n               }  \n            }\n          }\n          stage('deploy') {\n            openshift.withCluster() {\n              openshift.withProject() {\n                def dc = openshift.selector('dc', 'nodemysql')\n                dc.rollout().latest()\n              }\n            }\n          }\n        }\n   }\n} catch (err) {\n   echo \"in catch block\"\n   echo \"Caught: ${err}\"\n   currentBuild.result = 'FAILURE'\n   throw err\n}"}},"output":{},"resources":{},"postCommit":{},"nodeSelector":{},"successfulBuildsHistoryLimit":5,"failedBuildsHistoryLimit":5},"status":{"lastVersion":0}}
