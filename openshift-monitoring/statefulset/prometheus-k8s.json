{"kind":"StatefulSet","apiVersion":"apps/v1beta1","metadata":{"name":"prometheus-k8s","namespace":"openshift-monitoring","selfLink":"/apis/apps/v1beta1/namespaces/openshift-monitoring/statefulsets/prometheus-k8s","uid":"4e78b364-a716-11e9-9411-42010a9e0002","resourceVersion":"172049","generation":1,"creationTimestamp":"2019-07-15T15:36:25Z","labels":{"prometheus":"k8s"},"annotations":{"prometheus-operator-input-hash":"16269118918502353500"},"ownerReferences":[{"apiVersion":"monitoring.coreos.com/v1","kind":"Prometheus","name":"k8s","uid":"4e671a30-a716-11e9-9411-42010a9e0002","controller":true,"blockOwnerDeletion":true}]},"spec":{"replicas":2,"selector":{"matchLabels":{"app":"prometheus","prometheus":"k8s"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"prometheus","prometheus":"k8s"}},"spec":{"volumes":[{"name":"config","secret":{"secretName":"prometheus-k8s","defaultMode":420}},{"name":"config-out","emptyDir":{}},{"name":"prometheus-k8s-rulefiles-0","configMap":{"name":"prometheus-k8s-rulefiles-0","defaultMode":420}},{"name":"secret-prometheus-k8s-tls","secret":{"secretName":"prometheus-k8s-tls","defaultMode":420}},{"name":"secret-prometheus-k8s-proxy","secret":{"secretName":"prometheus-k8s-proxy","defaultMode":420}},{"name":"secret-prometheus-k8s-htpasswd","secret":{"secretName":"prometheus-k8s-htpasswd","defaultMode":420}},{"name":"prometheus-k8s-db","emptyDir":{}}],"containers":[{"name":"prometheus","image":"openshift/prometheus:v2.3.2","args":["--web.console.templates=/etc/prometheus/consoles","--web.console.libraries=/etc/prometheus/console_libraries","--config.file=/etc/prometheus/config_out/prometheus.env.yaml","--storage.tsdb.path=/prometheus","--storage.tsdb.retention=15d","--web.enable-lifecycle","--storage.tsdb.no-lockfile","--web.external-url=https://prometheus-k8s-openshift-monitoring.apps.openshift-311.lab/","--web.route-prefix=/","--web.listen-address=127.0.0.1:9090"],"resources":{},"volumeMounts":[{"name":"config-out","readOnly":true,"mountPath":"/etc/prometheus/config_out"},{"name":"prometheus-k8s-db","mountPath":"/prometheus"},{"name":"prometheus-k8s-rulefiles-0","mountPath":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0"},{"name":"secret-prometheus-k8s-tls","readOnly":true,"mountPath":"/etc/prometheus/secrets/prometheus-k8s-tls"},{"name":"secret-prometheus-k8s-proxy","readOnly":true,"mountPath":"/etc/prometheus/secrets/prometheus-k8s-proxy"},{"name":"secret-prometheus-k8s-htpasswd","readOnly":true,"mountPath":"/etc/prometheus/secrets/prometheus-k8s-htpasswd"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"prometheus-config-reloader","image":"quay.io/coreos/prometheus-config-reloader:v0.23.2","command":["/bin/prometheus-config-reloader"],"args":["--log-format=logfmt","--reload-url=http://localhost:9090/-/reload","--config-file=/etc/prometheus/config/prometheus.yaml","--config-envsubst-file=/etc/prometheus/config_out/prometheus.env.yaml"],"env":[{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}}],"resources":{"limits":{"cpu":"10m","memory":"50Mi"}},"volumeMounts":[{"name":"config","mountPath":"/etc/prometheus/config"},{"name":"config-out","mountPath":"/etc/prometheus/config_out"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"prometheus-proxy","image":"openshift/oauth-proxy:v1.1.0","args":["-provider=openshift","-https-address=:9091","-http-address=","-email-domain=*","-upstream=http://localhost:9090","-htpasswd-file=/etc/proxy/htpasswd/auth","-openshift-service-account=prometheus-k8s","-openshift-sar={\"resource\": \"namespaces\", \"verb\": \"get\"}","-openshift-delegate-urls={\"/\": {\"resource\": \"namespaces\", \"verb\": \"get\"}}","-tls-cert=/etc/tls/private/tls.crt","-tls-key=/etc/tls/private/tls.key","-client-secret-file=/var/run/secrets/kubernetes.io/serviceaccount/token","-cookie-secret-file=/etc/proxy/secrets/session_secret","-openshift-ca=/etc/pki/tls/cert.pem","-openshift-ca=/var/run/secrets/kubernetes.io/serviceaccount/ca.crt","-skip-auth-regex=^/metrics"],"ports":[{"name":"web","containerPort":9091,"protocol":"TCP"}],"resources":{},"volumeMounts":[{"name":"secret-prometheus-k8s-tls","mountPath":"/etc/tls/private"},{"name":"secret-prometheus-k8s-proxy","mountPath":"/etc/proxy/secrets"},{"name":"secret-prometheus-k8s-htpasswd","mountPath":"/etc/proxy/htpasswd"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"},{"name":"rules-configmap-reloader","image":"quay.io/coreos/configmap-reload:v0.0.1","args":["--webhook-url=http://localhost:9090/-/reload","--volume-dir=/etc/prometheus/rules/prometheus-k8s-rulefiles-0"],"resources":{"limits":{"cpu":"5m","memory":"10Mi"}},"volumeMounts":[{"name":"prometheus-k8s-rulefiles-0","mountPath":"/etc/prometheus/rules/prometheus-k8s-rulefiles-0"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":600,"dnsPolicy":"ClusterFirst","nodeSelector":{"node-role.kubernetes.io/infra":"true"},"serviceAccountName":"prometheus-k8s","serviceAccount":"prometheus-k8s","securityContext":{},"schedulerName":"default-scheduler"}},"serviceName":"prometheus-operated","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"RollingUpdate"},"revisionHistoryLimit":10},"status":{"observedGeneration":1,"replicas":2,"readyReplicas":2,"currentReplicas":2,"updatedReplicas":2,"currentRevision":"prometheus-k8s-99559fff7","updateRevision":"prometheus-k8s-99559fff7","collisionCount":0}}
