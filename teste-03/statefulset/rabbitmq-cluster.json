{"kind":"StatefulSet","apiVersion":"apps/v1beta1","metadata":{"name":"rabbitmq-cluster","namespace":"teste-03","selfLink":"/apis/apps/v1beta1/namespaces/teste-03/statefulsets/rabbitmq-cluster","uid":"507c7365-aa49-11e9-984c-42010a9e0002","resourceVersion":"172089","generation":2,"creationTimestamp":"2019-07-19T17:19:07Z","labels":{"app":"rabbitmq-cluster","app_name":"rabbitmq-cluster","template":"rabbitmq-cluster-3.7.16-template"}},"spec":{"replicas":3,"selector":{"matchLabels":{"app":"rabbitmq-cluster"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app":"rabbitmq-cluster","app_name":"rabbitmq-cluster"}},"spec":{"volumes":[{"name":"config-volume","configMap":{"name":"rabbitmq-cluster-config","items":[{"key":"rabbitmq.conf","path":"rabbitmq.conf"},{"key":"enabled_plugins","path":"enabled_plugins"}],"defaultMode":420}},{"name":"rabbitmq-cluster-storage","persistentVolumeClaim":{"claimName":"rabbitmq-cluster-storage"}}],"containers":[{"name":"rabbitmq","image":"marceloagmelo/rabbitmq-cluster-3.7.16:1.0.0.RELEASE","command":["sh"],"args":["-c","cp -v /etc/rabbitmq/rabbitmq.conf ${RABBITMQ_CONFIG_FILE}.conf; exec docker-entrypoint.sh rabbitmq-server"],"ports":[{"name":"http","containerPort":15672,"protocol":"TCP"},{"name":"amqp","containerPort":5672,"protocol":"TCP"}],"env":[{"name":"RABBITMQ_DEFAULT_USER","valueFrom":{"secretKeyRef":{"name":"rabbitmq-cluster-secret","key":"username"}}},{"name":"RABBITMQ_DEFAULT_PASS","valueFrom":{"secretKeyRef":{"name":"rabbitmq-cluster-secret","key":"password"}}},{"name":"RABBITMQ_RABBITMQ_ERLANG_COOKIE","valueFrom":{"secretKeyRef":{"name":"rabbitmq-cluster-secret","key":"cookie"}}},{"name":"K8S_SERVICE_NAME","value":"rabbitmq-cluster"},{"name":"PROJECT_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"TZ","value":"America/Sao_Paulo"},{"name":"http_proxy"},{"name":"https_proxy"},{"name":"no_proxy","value":"*.corp"},{"name":"POD_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(POD_NAME).rabbitmq-cluster.$(POD_NAMESPACE).svc.cluster.local"},{"name":"RABBITMQ_CONFIG_FILE","value":"/var/lib/rabbitmq/rabbitmq"}],"resources":{},"volumeMounts":[{"name":"config-volume","mountPath":"/etc/rabbitmq"},{"name":"rabbitmq-cluster-storage","mountPath":"/var/lib/rabbitmq"}],"livenessProbe":{"exec":{"command":["rabbitmqctl","status"]},"initialDelaySeconds":30,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["rabbitmqctl","status"]},"initialDelaySeconds":10,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-discovery","serviceAccount":"rabbitmq-discovery","securityContext":{},"schedulerName":"default-scheduler"}},"serviceName":"rabbitmq-cluster","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"OnDelete"},"revisionHistoryLimit":10},"status":{"observedGeneration":2,"replicas":3,"readyReplicas":3,"currentReplicas":3,"updatedReplicas":3,"currentRevision":"rabbitmq-cluster-54879df4f8","updateRevision":"rabbitmq-cluster-54879df4f8","collisionCount":0}}
