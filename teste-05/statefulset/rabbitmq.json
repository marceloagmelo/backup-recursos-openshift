{"kind":"StatefulSet","apiVersion":"apps/v1beta1","metadata":{"name":"rabbitmq","namespace":"teste-05","selfLink":"/apis/apps/v1beta1/namespaces/teste-05/statefulsets/rabbitmq","uid":"0b4737c2-af19-11e9-a847-42010a9e0002","resourceVersion":"368064","generation":7,"creationTimestamp":"2019-07-25T20:16:10Z","labels":{"app":"rabbitmq-cluster-3.6.15-template","app_name":"rabbitmq","template":"rabbitmq-cluster-3.6.15-template"}},"spec":{"replicas":3,"selector":{"matchLabels":{"app_name":"rabbitmq","application":"rabbitmq"}},"template":{"metadata":{"creationTimestamp":null,"labels":{"app_name":"rabbitmq","application":"rabbitmq"}},"spec":{"volumes":[{"name":"podinfo","emptyDir":{}},{"name":"rabbitmq-storage","persistentVolumeClaim":{"claimName":"rabbitmq-storage"}}],"containers":[{"name":"rabbitmq","image":"marceloagmelo/rabbitmq-3.6.15:1.0.0.RELEASE","ports":[{"containerPort":15672,"protocol":"TCP"},{"containerPort":5672,"protocol":"TCP"}],"env":[{"name":"RABBITMQ_DEFAULT_USER","valueFrom":{"secretKeyRef":{"name":"rabbitmq-secret","key":"username"}}},{"name":"RABBITMQ_DEFAULT_PASS","valueFrom":{"secretKeyRef":{"name":"rabbitmq-secret","key":"password"}}},{"name":"RABBITMQ_RABBITMQ_ERLANG_COOKIE","valueFrom":{"secretKeyRef":{"name":"rabbitmq-secret","key":"cookie"}}},{"name":"K8S_SERVICE_NAME","value":"rabbitmq"},{"name":"PROJECT_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"TZ","value":"America/Sao_Paulo"},{"name":"http_proxy"},{"name":"https_proxy"},{"name":"no_proxy","value":"*.corp"},{"name":"POD_IP","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"status.podIP"}}},{"name":"POD_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.name"}}},{"name":"POD_NAMESPACE","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}},{"name":"RABBITMQ_USE_LONGNAME","value":"true"},{"name":"RABBITMQ_NODENAME","value":"rabbit@$(POD_IP)"},{"name":"AUTOCLUSTER_DELAY","value":"10"},{"name":"AUTOCLUSTER_TYPE","value":"k8s"}],"resources":{"limits":{"cpu":"1","memory":"1G"},"requests":{"cpu":"1m","memory":"256M"}},"volumeMounts":[{"name":"podinfo","mountPath":"/opt/metadata"},{"name":"rabbitmq-storage","mountPath":"/var/lib/rabbitmq/mnesia"}],"livenessProbe":{"exec":{"command":["rabbitmqctl","status"]},"initialDelaySeconds":30,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"readinessProbe":{"exec":{"command":["rabbitmqctl","status"]},"initialDelaySeconds":10,"timeoutSeconds":10,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"capabilities":{},"privileged":false}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"rabbitmq-discovery","serviceAccount":"rabbitmq-discovery","securityContext":{},"schedulerName":"default-scheduler"}},"serviceName":"","podManagementPolicy":"OrderedReady","updateStrategy":{"type":"RollingUpdate","rollingUpdate":{"partition":0}},"revisionHistoryLimit":10},"status":{"observedGeneration":7,"replicas":3,"readyReplicas":3,"currentReplicas":3,"updatedReplicas":3,"currentRevision":"rabbitmq-584ccb7c5c","updateRevision":"rabbitmq-584ccb7c5c","collisionCount":0}}
