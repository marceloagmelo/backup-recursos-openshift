{"kind":"Template","apiVersion":"template.openshift.io/v1","metadata":{"name":"registry-console","namespace":"openshift","selfLink":"/apis/template.openshift.io/v1/namespaces/openshift/templates/registry-console","uid":"bcf7bafb-b867-11e9-993c-080027321238","resourceVersion":"931","creationTimestamp":"2019-08-06T16:32:10Z","annotations":{"description":"Template for deploying registry web console. Requires cluster-admin.","tags":"infrastructure"}},"objects":[{"apiVersion":"v1","kind":"DeploymentConfig","metadata":{"labels":{"name":"registry-console"},"name":"registry-console"},"spec":{"replicas":1,"selector":{"name":"registry-console"},"template":{"metadata":{"labels":{"name":"registry-console"}},"spec":{"containers":[{"env":[{"name":"OPENSHIFT_OAUTH_PROVIDER_URL","value":"${OPENSHIFT_OAUTH_PROVIDER_URL}"},{"name":"OPENSHIFT_OAUTH_CLIENT_ID","value":"${OPENSHIFT_OAUTH_CLIENT_ID}"},{"name":"KUBERNETES_INSECURE","value":"false"},{"name":"COCKPIT_KUBE_INSECURE","value":"false"},{"name":"REGISTRY_ONLY","value":"true"},{"name":"REGISTRY_HOST","value":"${REGISTRY_HOST}"}],"image":"${IMAGE_PREFIX}${IMAGE_BASENAME}:${IMAGE_VERSION}","livenessProbe":{"failureThreshold":3,"httpGet":{"path":"/ping","port":9090,"scheme":"HTTP"},"initialDelaySeconds":10,"periodSeconds":10,"successThreshold":1,"timeoutSeconds":5},"name":"registry-console","ports":[{"containerPort":9090,"protocol":"TCP"}],"readinessProbe":{"failureThreshold":3,"httpGet":{"path":"/ping","port":9090,"scheme":"HTTP"},"periodSeconds":10,"successThreshold":1,"timeoutSeconds":5}}]}},"triggers":[{"type":"ConfigChange"}]}},{"apiVersion":"v1","kind":"Service","metadata":{"labels":{"name":"registry-console"},"name":"registry-console"},"spec":{"ports":[{"name":"registry-console","port":9000,"protocol":"TCP","targetPort":9090}],"selector":{"name":"registry-console"},"type":"ClusterIP"}},{"apiVersion":"v1","kind":"ImageStream","metadata":{"annotations":{"description":"Atomic Registry console"},"name":"registry-console"},"spec":{"tags":[{"annotations":null,"from":{"kind":"DockerImage","name":"${IMAGE_PREFIX}${IMAGE_BASENAME}:${IMAGE_VERSION}"},"name":"${IMAGE_VERSION}"}]}},{"apiVersion":"v1","kind":"OAuthClient","metadata":{"name":"${OPENSHIFT_OAUTH_CLIENT_ID}","respondWithChallenges":false},"redirectURIs":["${COCKPIT_KUBE_URL}"],"secret":"${OPENSHIFT_OAUTH_CLIENT_SECRET}"}],"parameters":[{"name":"IMAGE_PREFIX","description":"Specify \"registry/namespace\" prefix for container image; e.g. for \"registry.example.com/cockpit/kubernetes:latest\", set prefix \"registry.example.com/cockpit/\"","value":"cockpit/"},{"name":"IMAGE_BASENAME","description":"Specify component name for container image; e.g. for \"registry.example.com/cockpit/kubernetes:latest\", use base name \"kubernetes\"","value":"kubernetes"},{"name":"IMAGE_VERSION","description":"Specify image version; e.g. for \"cockpit/kubernetes:latest\", set version \"latest\"","value":"latest"},{"name":"OPENSHIFT_OAUTH_PROVIDER_URL","description":"The public URL for the Openshift OAuth Provider, e.g. https://openshift.example.com:8443","required":true},{"name":"COCKPIT_KUBE_URL","description":"The registry console URL. This should be created beforehand using 'oc create route passthrough --service registry-console --port registry-console -n default', e.g. https://registry-console-default.example.com","required":true},{"name":"OPENSHIFT_OAUTH_CLIENT_SECRET","description":"Oauth client secret","generate":"expression","from":"user[a-zA-Z0-9]{64}"},{"name":"OPENSHIFT_OAUTH_CLIENT_ID","description":"Oauth client id","value":"cockpit-oauth-client"},{"name":"REGISTRY_HOST","description":"The integrated registry hostname exposed via route, e.g. registry.example.com","required":true}],"labels":{"createdBy":"registry-console-template"}}
